name: rspec on Runner
description: Run rspec directly on a runner
author: Faculty Development Team

inputs:
  working-directory:
    description: Working directory for Gemfile
    required: false
    default: ./

runs:
  using: composite
  steps:
    - uses: actions/checkout@v3
    - uses: ruby/setup-ruby@v1
      with:
        working-directory: ${{ inputs.working-directory }}
    - run: bundle add rspec-github-actions-summary
      shell: bash
      working-directory: ${{ inputs.working-directory }}
    - run: bundle install
      shell: bash
      working-directory: ${{ inputs.working-directory }}
    - run: bundle exec rspec --require rspec_github_actions_summary --format RspecGithubActionsSummary
      shell: bash
      working-directory: ${{ inputs.working-directory }}
    - run: bundle exec rspec-gh-summary >> $GITHUB_STEP_SUMMARY
      if: always()
      shell: bash
      working-directory: ${{ inputs.working-directory }}
